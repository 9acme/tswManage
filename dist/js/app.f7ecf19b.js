(function(e){function n(n){for(var r,o,c=n[0],s=n[1],i=n[2],l=0,d=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(u,o)&&u[o]&&d.push(u[o][0]),u[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(n);while(d.length)d.shift()();return a.push.apply(a,i||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,o=1;o<t.length;o++){var c=t[o];0!==u[c]&&(r=!1)}r&&(a.splice(n--,1),e=s(s.s=t[0]))}return e}var r={},o={app:0},u={app:0},a=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-18b97d92":"44bb425a","chunk-2d0b309a":"f94ec1ad","chunk-2d0f0f65":"49b88e69","chunk-2d21060b":"ff2b3429","chunk-2d213ed4":"fb32e1bc","chunk-2d22d454":"6050c348","chunk-2d2304b4":"e5dc70aa","chunk-600764b7":"e1866bd9","chunk-76d566a2":"7f3d79a8"}[e]+".js"}function s(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(e){var n=[],t={"chunk-18b97d92":1,"chunk-600764b7":1,"chunk-76d566a2":1};o[e]?n.push(o[e]):0!==o[e]&&t[e]&&n.push(o[e]=new Promise((function(n,t){for(var r="css/"+({}[e]||e)+"."+{"chunk-18b97d92":"0ef8419e","chunk-2d0b309a":"31d6cfe0","chunk-2d0f0f65":"31d6cfe0","chunk-2d21060b":"31d6cfe0","chunk-2d213ed4":"31d6cfe0","chunk-2d22d454":"31d6cfe0","chunk-2d2304b4":"31d6cfe0","chunk-600764b7":"1c257358","chunk-76d566a2":"b814b583"}[e]+".css",u=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var i=a[c],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===r||l===u))return n()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){i=d[c],l=i.getAttribute("data-href");if(l===r||l===u)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var r=n&&n.target&&n.target.src||u,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[e],f.parentNode.removeChild(f),t(a)},f.href=u;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){o[e]=0})));var r=u[e];if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((function(n,t){r=u[e]=[n,t]}));n.push(r[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;i=function(n){l.onerror=l.onload=null,clearTimeout(f);var t=u[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,t[1](d)}u[e]=void 0}};var f=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(n)},s.m=e,s.c=r,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)s.d(t,r,function(n){return e[n]}.bind(null,r));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var d=0;d<i.length;d++)n(i[d]);var f=l;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("f0a0")},"0b57":function(e,n,t){"use strict";t.r(n);t("f8ad"),t("d55c");var r=t("4360");n["default"]={inserted:function(e,n){var t=n.value,o="admin",u=r["a"].getters.roles;if(!(t&&t instanceof Array&&t.length>0))throw Error("请设置角色权限标签值");var a=t,c=u.some((function(e){return e==o||a.includes(e)}));c||e.parentNode&&e.parentNode.removeChild(e)}}},"197c":function(e,n,t){"use strict";t.r(n);t("f8ad"),t("d55c");var r=t("4360");n["default"]={inserted:function(e,n){var t=n.value,o="*/*",u=r["a"].getters&&r["a"].getters.permissions;if(!(t&&t instanceof Array&&t.length>0))throw Error("请设置操作权限标签值");var a=t,c=u.some((function(e){return e==o||a.includes(e)}));c||e.parentNode&&e.parentNode.removeChild(e)}}},4360:function(e,n,t){"use strict";var r=t("a593"),o=t("7736"),u={token:function(e){return e.user.token},roles:function(e){return e.user.roles},permissions:function(e){return e.user.permissions},addRoutes:function(e){return e.permissions.routes}},a=(t("8545"),t("16cc"),t("73ef")),c=t.n(a),s=t("5f87"),i=c.a.create({baseURL:"https://localhost/api/",timeout:5e3});c.a.interceptors.request.use((function(e){return E.getters.token&&(e.headers["X-Litemall-Admin-Token"]=Object(s["a"])()),e}),(function(e){console.log("error: ",e)})),c.a.interceptors.response.use((function(e){console.log("resp: ",e)}),(function(e){console.log("err: ",e)}));var l=i;function d(e){return l.request({url:"login",method:"post",data:e})}function f(){return l.request({url:"user/getUserInfo",method:"get"})}function h(){return l.request({url:"user/getRouters",method:"get"})}var p={state:{token:"",name:"",avatar:"",permissions:[],roles:[]},mutations:{SET_TOKEN:function(e,n){e.toke=n},SET_NAME:function(e,n){e.name=n},SET_AVATAR:function(e,n){e.avatar=n},SET_PERMISSIONS:function(e,n){e.permissions=n},SET_ROLES:function(e,n){e.roles=n}},actions:{login:function(e,n){var t=e.commit;return new Promise((function(e,r){d(n).then((function(n){var r=n.data.token;Object(s["b"])(r),t("SET_TOKEN",r),e()})).catch((function(e){r(e)}))}))},getUserInfo:function(e){var n=e.commit;return new Promise((function(e,t){f().then((function(t){n("SET_PERMISSIONS",t.data.permissions),n("SET_ROLES",t.data.roles),n("SET_AVATAR",t.data.avatar),n("SET_NAME",t.data.nickName),e()})).catch((function(e){t(e)}))}))}}},m=t("60b5"),b=t("6abc"),v=(t("6a61"),t("71d0"),t("dc28"),t("f073"),t("ba67"),t("a18c"));function g(e){var n=[],t=null;return e.forEach((function(e){t=Object(b["a"])({},e),t.component=k(t.component),t.children&&(t.children=g(t.children)),n.push(t)})),n}var k=function(e){return function(){return t("9dac")("./".concat(e))}},y={state:{routes:v["a"],addRoute:[]},mutations:{SET_ROUTES:function(e,n){e.addRoute=n,e.routes=e.routes.concat(n)}},actions:{GenerateRoutes:function(e){return Object(m["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.commit,n.next=3,h().then((function(e){var n=g(e.data.data);console.log("accessedRoutes: ",n),t("SET_ROUTES",n)})).catch((function(e){console.log("在线路由解析err: ",e)}));case 3:case"end":return n.stop()}}),n)})))()}}};r["default"].use(o["a"]);var E=n["a"]=new o["a"].Store({modules:{user:p,permissions:y},getters:u})},"56d7":function(e,n,t){"use strict";t.r(n);t("6bfc"),t("59c7"),t("f54d"),t("9109"),t("71d0"),t("16cc"),t("f073"),t("9065"),t("a336");var r=t("a593"),o=t("6255"),u=t.n(o),a=(t("a675"),t("a18c")),c=t("4360"),s=t("03a1");function i(e){return"https://localhost/api/"+e}s.mock(i("login"),(function(){return{msg:"操作成功",code:200,token:"eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImEzYjZjMzFlLTI4ODAtNDQ4Yy04ODIxLWMyNTUwMWRhZTE3NSJ9.0NKs-lcbbQkpEvqOx_lY_hIjb7fh0h_pibRKxpPlOPeMG5KcJK5fJ7Ll4JmsM3M54AAp80CWmYud_BKjXM9ytw"}})),s.mock(i("user/getUserInfo"),(function(){return{msg:"操作成功",code:200,permissions:["user/get"],roles:["admin"],user:{searchValue:null,createBy:"admin",createTime:"2020-11-20 19:29:42",updateBy:null,updateTime:null,remark:"管理员",params:{},userId:1,deptId:103,userName:"admin",nickName:"若依",email:"ry@163.com",phonenumber:"15888888888",sex:"1",avatar:"",salt:null,status:"0",delFlag:"0",loginIp:"127.0.0.1",loginDate:"2020-11-20T19:29:42.000+0800",dept:{searchValue:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,params:{},deptId:103,parentId:101,ancestors:null,deptName:"研发部门",orderNum:"1",leader:"若依",phone:null,email:null,status:"0",delFlag:null,parentName:null,children:[]},roles:[{searchValue:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,params:{},roleId:1,roleName:"超级管理员",roleKey:"admin",roleSort:"1",dataScope:"1",menuCheckStrictly:!1,deptCheckStrictly:!1,status:"0",delFlag:null,flag:!1,menuIds:null,deptIds:null,admin:!0}],roleIds:null,postIds:null,admin:!0}}})),s.mock(i("user/getRouters"),(function(){return{msg:"操作成功",code:200,data:[{path:"/user",component:"user/user",children:[{path:"role",component:"role/role"}]},{path:"/role",component:"role/role"},{path:"*",component:"error/404"}]}}));var l=t("6abc"),d=t("5f87"),f=["/login"];a["b"].beforeEach((function(e,n,t){Object(d["a"])()?"/login"==e.path?t(!1):0===c["a"].getters.roles.length?c["a"].dispatch("getUserInfo").then((function(){c["a"].dispatch("GenerateRoutes",c["a"].getters.permissions).then((function(){a["b"].addRoutes(c["a"].getters.addRoutes),t(Object(l["a"])(Object(l["a"])({},e),{},{replace:!0}))}))})).catch((function(e){alert(e)})):t():-1!==f.indexOf(e.path)?t():t("/login")}));t("b20f");var h=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},p=[],m={name:"App",created:function(){var e=this;sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",(function(){sessionStorage.setItem("store",JSON.stringify(e.$store.state))}))}},b=m,v=(t("034f"),t("5d22")),g=Object(v["a"])(b,h,p,!1,null,null,null),k=g.exports,y=t("d783");y.keys().forEach((function(e){var n=y(e),t=e.replace(/\.\/(.{1,}).js$/g,"$1");r["default"].directive(t,n.default||n)})),r["default"].use(u.a),r["default"].config.productionTip=!1,new r["default"]({store:c["a"],router:a["b"],render:function(e){return e(k)}}).$mount("#app")},"5f87":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return c}));var r=t("e04f"),o=t.n(r),u="xxx-token";function a(e){return o.a.set(u,e)}function c(){return o.a.get(u)}},"9dac":function(e,n,t){var r={"./error/401":["ec55",9,"chunk-2d2304b4"],"./error/401.vue":["ec55",9,"chunk-2d2304b4"],"./error/404":["2754",9,"chunk-2d0b309a"],"./error/404.vue":["2754",9,"chunk-2d0b309a"],"./layout/components/siderbar":["af81",9,"chunk-2d213ed4"],"./layout/components/siderbar/":["af81",9,"chunk-2d213ed4"],"./layout/components/siderbar/index":["af81",9,"chunk-2d213ed4"],"./layout/components/siderbar/index.vue":["af81",9,"chunk-2d213ed4"],"./layout/layout":["93f9",9,"chunk-600764b7"],"./layout/layout.vue":["93f9",9,"chunk-600764b7"],"./layout/style/layout.scss":["8089",7,"chunk-76d566a2"],"./login":["dd7b",9,"chunk-18b97d92"],"./login.vue":["dd7b",9,"chunk-18b97d92"],"./role/role":["9f35",9,"chunk-2d0f0f65"],"./role/role.vue":["9f35",9,"chunk-2d0f0f65"],"./success":["f77d",9,"chunk-2d22d454"],"./success.vue":["f77d",9,"chunk-2d22d454"],"./user/user":["b843",9,"chunk-2d21060b"],"./user/user.vue":["b843",9,"chunk-2d21060b"]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[2]).then((function(){return t.t(o,n[1])}))}o.keys=function(){return Object.keys(r)},o.id="9dac",e.exports=o},a18c:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t("16cc"),t("dc28"),t("f073");var r=t("a593"),o=t("8aaf");r["default"].use(o["a"]);var u=[{path:"/login",component:function(){return t.e("chunk-18b97d92").then(t.bind(null,"dd7b"))}},{path:"/404",component:function(){return t.e("chunk-2d0b309a").then(t.bind(null,"2754"))}},{path:"/403",component:function(){return t.e("chunk-2d2304b4").then(t.bind(null,"ec55"))}},{path:"/success",component:function(){return t.e("chunk-2d22d454").then(t.bind(null,"f77d"))}},{path:"/layout",component:function(){return t.e("chunk-600764b7").then(t.bind(null,"93f9"))}}];n["b"]=new o["a"]({mode:"hash",scrollBehavior:function(){return{y:0}},routes:u});var a=o["a"].prototype.push;o["a"].prototype.push=function(e,n,t){return n||t?a.call(this,e,n,t):a.call(this,e).catch((function(e){return e}))}},b20f:function(e,n,t){},d783:function(e,n,t){var r={"./has-permissions.js":"197c","./has-role.js":"0b57"};function o(e){var n=u(e);return t(n)}function u(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=u,e.exports=o,o.id="d783"},f0a0:function(e,n,t){}});
//# sourceMappingURL=app.f7ecf19b.js.map